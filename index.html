<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nemi ‚Äì Your Personalized Path to Homeownership</title>

  <!-- Tailwind (utility only) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- [NEMI:ASSET PRELOAD] your server prefers extensionless SVG paths -->
  <link rel="preload" as="image" href="./assets/svgs/signinrenamed" type="image/svg+xml" />
</head>
<body class="bg-white text-slate-900">

  <!-- =========================================================
       [NEMI:MOBILE HERO]    (9:16 container; SVG + absolutely
       positioned ‚Äúslots‚Äù aligned to <rect> anchors inside SVG)
       ========================================================= -->
  <section id="nemiMobile"
    class="relative mx-auto w-[min(520px,96vw)] overflow-hidden invisible"
    style="aspect-ratio:9/16">

    <!-- [SLOT] Frosted card bg (behind everything except SVG art) -->
    <div id="slot-loginboxbg" class="slot-bg absolute hidden" aria-hidden="true"></div>

    <!-- [SVG HOST] Inline-injected SVG (keeps viewBox scale) -->
    <div id="mobileArt" class="absolute inset-0" style="z-index:1;"></div>

    <!-- =======================
         [OVERLAY SLOTS]
         ======================= -->

    <!-- Team icon (fills rect: #teamiconbox) -->
    <div id="slot-teamiconbox" class="slot absolute hidden">
      <img src="./assets/img/teamicon.svg" alt="Team" class="w-full h-full object-contain">
    </div>

    <!-- Title (single centered line; JS fits to slot) -->
    <div id="slot-titletextbox" class="slot absolute hidden">
      <div class="titlecopy text-slate-900" style="--fsTitle:22px;"></div>
    </div>

    <!-- Two-line subtext (exactly two <span>) -->
    <div id="slot-oneteam" class="slot absolute hidden">
      <div class="otcopy text-slate-800" style="--fsSub:16px;">
        <span id="ot-line1"></span>
        <span id="ot-line2"></span>
      </div>
    </div>

    <!-- CTA pill -->
    <a id="slot-getstartedwithnemi" href="#"
       class="slot absolute hidden inline-flex items-center justify-center rounded-full border-2 border-slate-800/90 bg-yellow-400 font-semibold text-slate-900"></a>

    <!-- Already a member -->
    <div id="slot-alreadyamember" class="slot absolute hidden">
      <p class="amcopy"></p>
    </div>

    <!-- Email -->
    <div id="slot-emailbox" class="slot absolute hidden">
      <input class="w-full h-full rounded-full border-2 border-slate-300 px-3 text-[16px]"
             type="email" name="email" placeholder="Email" autocomplete="username">
    </div>

    <!-- Password -->
    <div id="slot-passwordbox" class="slot absolute hidden">
      <input class="w-full h-full rounded-full border-2 border-slate-300 px-3 text-[16px]"
             type="password" name="password" placeholder="Password" autocomplete="current-password">
    </div>

    <!-- Login button -->
    <button id="slot-loginbar" class="slot absolute hidden rounded-full border-2 border-slate-800/80 bg-yellow-400 font-semibold">üîí Login</button>

    <!-- Forgot -->
    <a id="slot-forgotpassword" href="/auth/forgot.php"
       class="slot absolute hidden underline text-[12px] text-slate-700 text-center">Forgot Password?</a>

    <!-- Store badges -->
    <a id="slot-appdownload" href="#" class="slot absolute hidden block" aria-label="Download on the App Store">
      <img src="./assets/img/appstore.svg" class="w-full h-full object-contain" alt="">
    </a>
    <a id="slot-androiddownload" href="#" class="slot absolute hidden block" aria-label="Get it on Google Play">
      <img src="./assets/img/googleplay.svg" class="w-full h-full object-contain" alt="">
    </a>

    <!-- Explore Features -->
    <a id="slot-explorenemibox" href="#"
       class="slot absolute hidden inline-flex items-center justify-center rounded-full border-2 border-slate-800/80 bg-white text-slate-900 font-semibold"></a>

    <!-- Apply line -->
    <div id="slot-realtorapply" class="slot absolute hidden flex items-center justify-center text-[12px] text-slate-600 text-center">
      <span id="apply-line"></span>&nbsp;<a id="apply-link" href="/pros/apply" class="underline text-slate-800">Apply Here!</a>
    </div>
  </section>

  <!-- ==================
       [NEMI:STYLES]
       ================== -->
  <style>
/* ===== iOS text zoom guard ===== */
html { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }

/* ===== Quick CSS knobs (visual only; copy knobs are in JS CONFIG) ===== */
#nemiMobile{
  --card-opacity: .65;     /* .55‚Äì.80 */
  --title-nudge-y: 2px;    /* +down / -up */
  --oneteam-nudge-y: -1px; /* +down / -up */
  --oneteam-gap: 4px;      /* space between the two subtext lines */
}

/* Frosted card */
#nemiMobile .slot-bg{
  z-index: 6; /* above SVG, below interactive slots */
  background: rgba(255,255,255,var(--card-opacity));
  border-radius: 24px;
  box-shadow: 0 10px 30px rgba(20,35,58,0.15);
  pointer-events: none;
  backdrop-filter: blur(8px) saturate(1.1);
  -webkit-backdrop-filter: blur(8px) saturate(1.1);
  border: 1px solid rgba(255,255,255,0.35);
}

/* All overlay slots sit above the SVG artwork */
#nemiMobile .slot { z-index: 10; }

/* Title + Subtext containers are flex-centered inside their rects */
#slot-titletextbox,
#slot-oneteam{
  display:flex; align-items:center; justify-content:center; overflow:hidden;
}

/* Title: single line; size is controlled by --fsTitle (JS) */
#slot-titletextbox .titlecopy{
  width:100%;
  white-space:nowrap;
  text-align:center;
  line-height:1.28;
  font-weight:800;
  font-size:var(--fsTitle) !important;
  box-sizing:border-box;
  padding-inline:6px;
  letter-spacing:-0.15px;
  transform: translateY(var(--title-nudge-y));
}

/* Subtext block (two lines) */
#slot-oneteam .otcopy{
  width:100%;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  text-align:center; padding-inline:2px;
  line-height:1.05;                /* a touch larger than before for iPhone */
  font-size:var(--fsSub);          /* JS sets */
  transform: translateY(var(--oneteam-nudge-y));
}
#slot-oneteam .otcopy > span{ display:block; white-space:nowrap; }
#slot-oneteam .otcopy > span + span{ margin-top: var(--oneteam-gap); }
#slot-oneteam{ z-index: 11; }

/* CTA Pill (font-size set by JS scaleCta) */
#slot-getstartedwithnemi{
  z-index:15; display:flex !important; align-items:center; justify-content:center;
  width:100%; height:100%; border-radius:9999px; text-decoration:none;
  font-weight:800; letter-spacing:.2px; color:#0f1e3a;
  border:3px solid #1c2c46;
  background: linear-gradient(#f6d768, #e3be32);
  box-shadow: 0 3px 0 #1c2c46, 0 6px 18px rgba(28,44,70,.25), inset 0 2px 0 rgba(255,255,255,.65);
  font-size:inherit;
}
#slot-getstartedwithnemi:hover { filter: brightness(1.02); }
#slot-getstartedwithnemi:active { transform: translateY(1px); box-shadow: 0 1px 0 #1c2c46, 0 4px 12px rgba(28,44,70,.22), inset 0 1px 0 rgba(255,255,255,.55); }
#slot-getstartedwithnemi:focus-visible { outline:3px solid #0ea5e9; outline-offset:2px; }

/* Already a member */
#slot-alreadyamember{ display:flex; align-items:center; justify-content:center; text-align:center; }
#slot-alreadyamember .amcopy{ font-size: clamp(12px, 2.8vw, 14px); transform: translateY(-4px); }

/* Inputs + secondary buttons */
#nemiMobile input:focus{ outline:none; border-color:#1c2c46; box-shadow:0 0 0 4px rgba(28,44,70,.12); }
#slot-loginbar, #slot-explorenemibox{ font-size: clamp(18px, 3.6vw, 20px); }
  </style>

  <!-- ==============
       [NEMI:SCRIPTS]
       ============== -->
  <script>
(function(){
  /* =========================================================
     [NEMI:CONFIG]  ‚ùó EDIT HERE ONLY (copy, URLs, sizing knobs)
     ========================================================= */
   /* =========================================================
   [NEMI:CONFIG] ‚Äî copy, URLs, desktop sizes
   ========================================================= */
const TEXT = {
  title: "Take Control of Your Homebuying Journey",
  sub1:  "One <strong>team</strong>. Every step, <strong>always</strong> clear.",
  sub2:  "Your Realtor, Lender &amp; Attorney in <strong>One</strong> Hub.",
  cta:   "Get Started With Nemi",
  already: "Already a Nemi Member? Sign in below!",
  explore: "Explore Nemi Features",
  applyLead: "Have what it takes to be a Nemi Pro?"
};
const LINKS = {
  cta: "/signup", explore: "/features",
  appstore: "#",  play: "#",
  apply: "/pros/apply", forgot: "/auth/forgot.php"
};

/* ---------- Base (desktop-ish) sizes ---------- */
const CFG = {
  svgCandidates: [
    'assets/svgs/signinrenamed','/assets/svgs/signinrenamed','/nemi/assets/svgs/signinrenamed',
    'assets/svgs/signinrenamed.svg','/assets/svgs/signinrenamed.svg','/nemi/assets/svgs/signinrenamed.svg'
  ],
  cardGrowX: 10,

  /* Title slot (rect: #titletextbox) */
  titleInsetLR: -12,  titleInsetT: 3, titleInsetB: 0,
  titleFontMin: 18,   titleFontMax: 32,   // ‚Üê desktop caps

  /* Two-line subtext (rect: #oneteam) */
  oneteamPadPx: 0, oneteamBumpUp: 8, oneteamExtraHeight: 16,
  oneteamFontMin: 18, oneteamFontMax: 22,

  /* CTA pill */
  ctaInset: { l:-10, r:-10, t:0, b:0 },
  ctaNudgeY: 4, ctaFontMin: 16, ctaFontMax: 28, ctaScale: 0.5,

  /* ‚ÄúAlready‚Ä¶‚Äù line */
  alreadyNudgeY: -1
};

/* =========================================================
   [NEMI:MOBILE TUNING PRESETS] ‚Äî edit these only to shrink/grow
   for narrow phones. The first matching preset is applied.
   ========================================================= */
const MOBILE_TUNING = [
  { /* Tiny phones (e.g., iPhone SE) */
    maxWidth: 340,
    scale: 0.86,                 // global text scale for title/subtext/CTA
    titleMax: 24, titleMin: 16,  // hard caps for title
    subMax: 18,   subMin: 16,    // hard caps for subtext
    extraCtaNudge: 8
  },
  { /* Small phones (most iPhones @ 360‚Äì375 width) */
    maxWidth: 380,
    scale: 0.92,
    titleMax: 26, titleMin: 16,
    subMax: 19,  subMin: 16,
    extraCtaNudge: 6
  }
  // Add more presets if you want different breakpoints.
];

/* Helper: resolve the active tuning based on viewport width */
function getMobileTuning(vw){
  for (const p of MOBILE_TUNING) if (vw <= p.maxWidth) return p;
  return null; // desktop/tablet ‚Üí use CFG as-is
}

  /* ===============================
     [NEMI:Populate copy + links]
     =============================== */
  document.querySelector('#slot-getstartedwithnemi').textContent = TEXT.cta;
  document.querySelector('#slot-getstartedwithnemi').href = LINKS.cta;

  document.querySelector('#ot-line1').innerHTML = TEXT.sub1;
  document.querySelector('#ot-line2').innerHTML = TEXT.sub2;
  document.querySelector('#slot-titletextbox .titlecopy').innerHTML = TEXT.title;

  document.querySelector('#slot-alreadyamember .amcopy').textContent = TEXT.already;

  document.querySelector('#slot-explorenemibox').textContent = TEXT.explore;
  document.querySelector('#slot-explorenemibox').href = LINKS.explore;

  document.querySelector('#slot-appdownload').href = LINKS.appstore;
  document.querySelector('#slot-androiddownload').href = LINKS.play;

  document.querySelector('#apply-line').textContent = TEXT.applyLead;
  document.querySelector('#apply-link').href = LINKS.apply;
  document.querySelector('#slot-forgotpassword').href = LINKS.forgot;

  /* ===============================
     [NEMI:Boot + layout engine]
     =============================== */
  const section = document.getElementById('nemiMobile');
  const host    = document.getElementById('mobileArt');

  // try multiple SVG URLs until one works
  function fetchFirst(urls, done){
    let i = 0;
    (function next(){
      if (i >= urls.length) return done(null);
      fetch(urls[i], { cache:'no-cache' })
        .then(r => { if (!r.ok) throw 0; return r.text(); })
        .then(txt => done(txt))
        .catch(() => { i++; next(); });
    })();
  }

  fetchFirst(CFG.svgCandidates, function(svgText){
    if (!svgText) { section.classList.remove('invisible'); return; }

    // inject SVG inline
    host.innerHTML = svgText.replace('<svg','<svg id="mobileSVG" style="display:block;width:100%;height:100%;pointer-events:none"');
    const svg = document.getElementById('mobileSVG');

    // keep container aspect
    const vb = svg.viewBox.baseVal;
    if (vb && vb.width && vb.height) section.style.aspectRatio = vb.width + ' / ' + vb.height;

    /* ---------- helpers ---------- */
    function place(rectId, slotId, pad=0){
      const rEl = svg.querySelector('#'+rectId);
      const slot= document.getElementById(slotId);
      if (!rEl || !slot) { if(!rEl) console.warn('Missing anchor:', rectId); return; }
      const hb = host.getBoundingClientRect();
      const r  = rEl.getBoundingClientRect();
      slot.style.position='absolute';
      slot.style.display='block';
      slot.style.left   = (r.left - hb.left + pad) + 'px';
      slot.style.top    = (r.top  - hb.top  + pad) + 'px';
      slot.style.width  = (r.width  - pad*2) + 'px';
      slot.style.height = (r.height - pad*2) + 'px';
    }
    function placeInset(rectId, slotId, inset={}){
      const rEl = svg.querySelector('#'+rectId);
      const slot= document.getElementById(slotId);
      if (!rEl || !slot) return;
      const hb = host.getBoundingClientRect(), r = rEl.getBoundingClientRect();
      const l = inset.l||0, t = inset.t||0, rr = inset.r||0, b = inset.b||0;
      slot.style.position='absolute';
      slot.style.display='block';
      slot.style.left   = (r.left - hb.left + l) + 'px';
      slot.style.top    = (r.top  - hb.top  + t) + 'px';
      slot.style.width  = (r.width  - l - rr) + 'px';
      slot.style.height = (r.height - t - b) + 'px';
    }
    function fitVar(slotSel, blockSel, varName, minPx, maxPx){
      const slot  = document.querySelector(slotSel);
      const block = slot ? slot.querySelector(blockSel) : null;
      if (!slot || !block) return minPx;
      let lo=minPx, hi=maxPx, best=minPx;
      for (let i=0;i<12;i++){
        const mid=(lo+hi)/2;
        block.style.setProperty(varName, mid+'px');
        const fits = (block.scrollWidth <= slot.clientWidth + 0.5) &&
                     (block.scrollHeight <= slot.clientHeight + 0.5);
        if (fits) { best=mid; lo=mid; } else { hi=mid; }
      }
      block.style.setProperty(varName, Math.floor(best)+'px');
      return best;
    }
    // safe single-line fitter (bigger safety on iOS)
    function fitOneLine(slotSel, blockSel, varName, minPx, maxPx){
      const slot  = document.querySelector(slotSel);
      const block = slot ? slot.querySelector(blockSel) : null;
      if (!slot || !block) return minPx;
      const isiOS = /iP(hone|ad|od)/.test(navigator.platform) ||
                    (navigator.userAgent.includes('Mac') && 'ontouchend' in document);
      const SAFETY = isiOS ? 32 : 18;  // widened for iPhone
      let lo=minPx, hi=maxPx, best=minPx;
      for (let i=0;i<12;i++){
        const mid=(lo+hi)/2;
        block.style.setProperty(varName, mid+'px');
        const fitsW = block.scrollWidth <= (slot.clientWidth - SAFETY);
        const fitsH = block.getBoundingClientRect().height <= slot.clientHeight;
        if (fitsW && fitsH){ best=mid; lo=mid; } else { hi=mid; }
      }
      block.style.setProperty(varName, Math.max(minPx, Math.floor(best)-1) + 'px');
      return best;
    }
    function scaleCta(slotId){
      const el = document.getElementById(slotId);
      if (!el) return;
      const h  = el.clientHeight || 0;
      const fs = Math.max(CFG.ctaFontMin, Math.min(CFG.ctaFontMax, Math.floor(h * (CFG.ctaScale || 0.5))));
      el.style.fontSize   = fs + 'px';
      el.style.lineHeight = '1';
      el.style.whiteSpace = 'nowrap';
    }

    /* ---------- single layout pass ---------- */
    function layout(){
      // small-device flag (iPhone portrait 320‚Äì375)
      const vw = section.clientWidth;
  const preset = getMobileTuning(vw);      // null on desktop/tablet
  const small  = !!preset;

      
  
     /* 1) Frosted panel + radius sync */
  place('loginbox', 'slot-loginboxbg', 3);
  (function syncRadius(){
    const rEl = svg.querySelector('#loginbox'); if (!rEl) return;
    const rx = parseFloat(rEl.getAttribute('rx') || 0);
    const ry = parseFloat(rEl.getAttribute('ry') || rx || 0);
    const bg = document.getElementById('slot-loginboxbg');
    if (bg && (rx || ry)) bg.style.borderRadius = Math.max(rx, ry) + 'px';
  })();

  /* 2) Icon + header */
  place('teamiconbox','slot-teamiconbox');

  // Title inset (gentler on small phones)
  const titleInsetLR = small ? Math.min(-6, CFG.titleInsetLR) : CFG.titleInsetLR;
  placeInset('titletextbox','slot-titletextbox', {
    l:titleInsetLR, r:titleInsetLR, t:CFG.titleInsetT, b:CFG.titleInsetB
  });

  // Subtext slot
  const P = CFG.oneteamPadPx|0, U = CFG.oneteamBumpUp|0, G = CFG.oneteamExtraHeight|0;
  placeInset('oneteam','slot-oneteam', { l:P, r:P, t:P-U, b:P+U-G });

  /* ---------- Size caps (apply mobile preset if present) ---------- */
  const titleMin = preset ? preset.titleMin : CFG.titleFontMin;
  const titleMax = preset ? preset.titleMax : CFG.titleFontMax;
  const subMin   = preset ? preset.subMin   : CFG.oneteamFontMin;
  const subMax   = preset ? preset.subMax   : CFG.oneteamFontMax;
  const scale    = preset ? preset.scale    : 1;

  // 3) Fit text (subtext first, then title), with preset caps + scale
  const fittedSub = fitVar('#slot-oneteam', '.otcopy', '--fsSub',
                           Math.round(subMin*scale), Math.round(subMax*scale));
  fitOneLine('#slot-titletextbox', '.titlecopy', '--fsTitle',
             Math.round(titleMin*scale), Math.round(titleMax*scale));

  /* 4) CTA pill ‚Äî slip it down a hair more on small phones */
  const ctaNudge = CFG.ctaNudgeY + (preset?.extraCtaNudge || 0);
  placeInset('getstartedwithnemi','slot-getstartedwithnemi', {
    l: CFG.ctaInset.l - CFG.cardGrowX,
    r: CFG.ctaInset.r - CFG.cardGrowX,
    t: CFG.ctaInset.t + ctaNudge,
    b: CFG.ctaInset.b - ctaNudge
  });
  scaleCta('slot-getstartedwithnemi'); // font stays proportional to pill height

  /* 5) ‚ÄúAlready a Nemi Member?‚Äù */
  placeInset('alreadyamember','slot-alreadyamember',
             { t: CFG.alreadyNudgeY, b: -CFG.alreadyNudgeY });

  /* 6) Form + extras */
  place('emailbox',       'slot-emailbox');
  place('passwordbox',    'slot-passwordbox');
  place('loginbar',       'slot-loginbar');
  place('forgotpassword', 'slot-forgotpassword');
  place('appdownload',    'slot-appdownload');
  place('androiddownload','slot-androiddownload');
  place('explorenemibox', 'slot-explorenemibox');
  place('realtorapply',   'slot-realtorapply');

  section.classList.remove('invisible');
}

    // fonts ready ‚Üí layout
    (document.fonts && document.fonts.ready?.then)
      ? document.fonts.ready.then(layout)
      : layout();

    // reflow guards
    window.addEventListener('resize', layout, { passive:true });
    window.addEventListener('orientationchange', layout, { passive:true });
    window.addEventListener('pageshow', layout, { passive:true }); // iOS bfcache
    new ResizeObserver(layout).observe(document.getElementById('mobileArt'));
    requestAnimationFrame(() => setTimeout(layout, 60)); // one extra pass after paint
  });
})();
  </script>
</body>
</html>
