<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nemi â€“ Your Personalized Path to Homeownership</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preload" as="image" href="./assets/svgs/signinrenamed">
</head>
<body class="bg-white text-slate-900">

  <!-- MOBILE: SVG-driven hero -->
<section id="nemiMobile" class="md:hidden relative mx-auto w-[min(520px,96vw)] overflow-hidden invisible" style="aspect-ratio:9/16">
  <div id="mobileArt" class="absolute inset-0"></div>

  <!-- team icon fills its rect -->
  <div id="slot-teamiconbox" class="absolute hidden">
    <img src="./assets/img/teamicon.svg" alt="Team" class="w-full h-full object-contain">
  </div>

  <!-- TITLE: will be auto-fitted to titletextbox -->
  <div id="slot-titletextbox" class="absolute hidden flex items-center">
    <div class="titlecopy text-slate-900" style="--fs:22px;">
      <h1 class="t1">Take Control of Your Homebuying Journey.</h1>
      <p class="t2"><strong>One team.</strong> Every step, <em class="i">always</em> clear.</p>
      <p class="t3">Your Realtor, Lender &amp; Attorney in One Hub.</p>
    </div>
  </div>

  <a id="slot-getstartedwithnemi" href="/signup"
     class="absolute hidden inline-flex items-center justify-center rounded-full border-2 border-slate-800/90 bg-yellow-400 font-semibold text-slate-900">
    Get Started With Nemi
  </a>

  <div id="slot-alreadyamember" class="absolute hidden flex items-center justify-center text-[12px] text-slate-600">
    Already a Nemi Member?
  </div>

  <div id="slot-emailbox" class="absolute hidden">
    <input class="w-full h-full rounded-full border-2 border-slate-300 px-3 text-[16px]" type="email" name="email" placeholder="Email" autocomplete="username">
  </div>
  <div id="slot-passwordbox" class="absolute hidden">
    <input class="w-full h-full rounded-full border-2 border-slate-300 px-3 text-[16px]" type="password" name="password" placeholder="Password" autocomplete="current-password">
  </div>

  <button id="slot-loginbar" class="absolute hidden rounded-full border-2 border-slate-800/80 bg-yellow-400 font-semibold">ðŸ”’ Login</button>

  <a id="slot-forgotpassword" href="/auth/forgot.php" class="absolute hidden underline text-[12px] text-slate-700 text-center">Forgot Password?</a>

  <a id="slot-appdownload" href="#" class="absolute hidden block" aria-label="Download on the App Store">
    <img src="./assets/img/appstore.svg" class="w-full h-full object-contain" alt="">
  </a>
  <a id="slot-androiddownload" href="#" class="absolute hidden block" aria-label="Get it on Google Play">
    <img src="./assets/img/googleplay.svg" class="w-full h-full object-contain" alt="">
  </a>

  <a id="slot-explorenemibox" href="/features"
     class="absolute hidden inline-flex items-center justify-center rounded-full border-2 border-slate-800/80 bg-white text-slate-900 font-semibold">
    Explore Nemi Features
  </a>

  <div id="slot-realtorapply" class="absolute hidden flex items-center justify-center text-[12px] text-slate-600 text-center">
    Have what it takes to be a Nemi Pro?
    &nbsp;<a href="/pros/apply" class="underline text-slate-800">Apply Here!</a>
  </div>
</section>

<script>
(async function(){
  const section = document.getElementById('nemiMobile');
  const host    = document.getElementById('mobileArt');

  // Try extensionless and .svg (handles your server behavior)
  const candidates = [
    'assets/svgs/signinrenamed',           // extensionless, relative
    '/assets/svgs/signinrenamed',          // extensionless, root
    '/nemi/assets/svgs/signinrenamed',     // extensionless, under /nemi
    'assets/svgs/signinrenamed.svg',
    '/assets/svgs/signinrenamed.svg',
    '/nemi/assets/svgs/signinrenamed.svg'
  ];

  let svgText = null;
  for (const url of candidates) {
    try {
      const r = await fetch(url, { cache: 'no-cache' });
      if (r.ok) { svgText = await r.text(); break; }
    } catch(_) {}
  }
  if (!svgText) { section.classList.remove('invisible'); return; }

  // Inline the SVG so we can query its rect anchors
  host.innerHTML = svgText.replace('<svg', '<svg id="mobileSVG" style="display:block;width:100%;height:100%;pointer-events:none"');
  const svg = document.getElementById('mobileSVG');

  // Keep container aspect ratio exactly matching the viewBox
  const vb = svg.viewBox.baseVal;
  if (vb && vb.width && vb.height) section.style.aspectRatio = vb.width + ' / ' + vb.height;

  // place() positions a slot to fill an SVG <rect>
  function place(rectId, slotId, pad=0){
    const rect = svg.querySelector('#'+rectId);
    const slot = document.getElementById(slotId);
    if(!rect || !slot){ if(!rect) console.warn('Missing anchor:', rectId); return; }
    const hostBox = host.getBoundingClientRect();
    const r = rect.getBoundingClientRect();
    Object.assign(slot.style, {
      position:'absolute',
      left:  (r.left - hostBox.left + pad) + 'px',
      top:   (r.top  - hostBox.top  + pad) + 'px',
      width: (r.width  - pad*2) + 'px',
      height:(r.height - pad*2) + 'px',
      display:'block'
    });
  }

  // Auto-fit the headline to its box (binary search for --fs)
  function fitTitle(){
    const slot = document.getElementById('slot-titletextbox');
    const copy = slot?.querySelector('.titlecopy');
    if (!slot || !copy) return;

    const maxPx = 24;    // upper bound for Line 1 base size
    const minPx = 12;    // lower bound
    let lo = minPx, hi = maxPx, best = minPx;

    // while loop, ~12 steps is enough
    for (let i=0; i<12; i++) {
      const mid = (lo + hi) / 2;
      copy.style.setProperty('--fs', mid + 'px');
      // Give the browser a tick to layout
      // (no await needed; sync measurement works well enough here)
      const fits = (copy.scrollWidth <= slot.clientWidth + 0.5) &&
                   (copy.scrollHeight <= slot.clientHeight + 0.5);
      if (fits) { best = mid; lo = mid; } else { hi = mid; }
    }
    copy.style.setProperty('--fs', Math.floor(best) + 'px');
  }

  function layout(){
    // headline cluster (+ a little inner padding to breathe)
    place('teamiconbox',          'slot-teamiconbox');
    place('titletextbox',         'slot-titletextbox', 6);

    // card internals
    place('getstartedwithnemi',   'slot-getstartedwithnemi');
    place('alreadyamember',       'slot-alreadyamember');
    place('emailbox',             'slot-emailbox');
    place('passwordbox',          'slot-passwordbox');
    place('loginbar',             'slot-loginbar');
    place('forgotpassword',       'slot-forgotpassword');

    // app badges + extras
    place('appdownload',          'slot-appdownload');
    place('androiddownload',      'slot-androiddownload');
    place('explorenemibox',       'slot-explorenemibox');
    place('realtorapply',         'slot-realtorapply');

    fitTitle();
    section.classList.remove('invisible');
  }

  window.addEventListener('resize', layout, { passive:true });
  requestAnimationFrame(layout);
})();
</script>

<style>
/* Headline styling to match your screenshot */
#slot-titletextbox .titlecopy { text-align:left; line-height:1.15; text-wrap:balance; }
#slot-titletextbox .titlecopy .t1 { font-weight:800; font-size:var(--fs); margin:0 0 4px 0; }
#slot-titletextbox .titlecopy .t2 { font-size:calc(var(--fs) * .82); margin:0 0 2px 0; }
#slot-titletextbox .titlecopy .t2 .i { font-style:italic; }
#slot-titletextbox .titlecopy .t3 { font-size:calc(var(--fs) * .8); margin:0; color:#334155; }

/* Inputs focus look */
#nemiMobile input:focus { outline:none; border-color:#1c2c46; box-shadow:0 0 0 4px rgba(28,44,70,.12); }
/* Buttons scale nicely to their boxes */
#slot-getstartedwithnemi, #slot-loginbar, #slot-explorenemibox { font-size: clamp(14px, 3.6vw, 18px); }
</style>

</body>
</html>
